---
import Layout from "../layouts/Layout.astro";
import fetchNasaAPOD from "../utils/fetchNasaAPOD";
import fetchMarsPhotos from "../utils/fetchMarsRoverPhotos";
 

const apod = await fetchNasaAPOD();
const marsPhotos = await fetchMarsPhotos();
---

<Layout title="Library | Cosmos Library">
  <section class="library-section">
    <h1>üõ∞Ô∏è The Cosmos Library</h1>
    <p>Dive into curated content on space missions, open APIs, telescope data, and more. This page will evolve to showcase real-time integrations and long-form research.</p>
    <p>üöß Library content still under construction...</p>
    <!-- APOD Card -->
    <div class="library-grid">
      <div class="library-card">
        <h2>üì∏ Astronomy Picture of the Day</h2>
        <img src={apod.url} alt={apod.title} />
        <h3>{apod.title}</h3>
        <p>{apod.explanation}</p>
      </div>

      <!-- Mars Rover Photos -->
      <div class="library-card">
        <h2>üöó Curiosity Rover ‚Äî Sol 1000</h2>
        <div class="rover-slideshow">
          <div class="rover-slide-container">
            {marsPhotos.map((photo, i) => (
              <div class={`rover-slide${i === 0 ? " active" : ""}`}>
                <img src={photo.img_src} alt={`Photo by ${photo.rover.name}`} />
                <small>{photo.rover.name} ‚Ä¢ {photo.camera.full_name}</small>
              </div>
            ))}
          </div>
          <div class="rover-controls">
            <button id="prevRover">&#11013;</button>
            <button id="nextRover">&#10145;</button>
          </div>
        </div>
      </div>
    </div>
      
  </section>
  <script type="module" src="/scripts/roverSlideshow.js"></script>

</Layout>
